<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
	integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
	crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.6.0.js"
	integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
	integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
	crossorigin="anonymous"></script>
<script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
	integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
	crossorigin="anonymous"></script>
<link rel="stylesheet" href="css/legacy.css" />
</head>


<body ng-controller="customerController">
	<div class="jumbotron">
		<h1>Example Telecom</h1>
		<h5>Customer Information Management System</h5>
	</div>
	<div>
		<div class="row row-content">
			<div class="col-12 col-sm-3 col-md-2">
				<div class="sidenav">
					<a href="/telecom/home">Home</a> <a href="/telecom/customer">Customer</a>
					<a href="/telecom/plan">Plan</a> <a href="/telecom/inventory">Inventory</a>
					<a href="/telecom/billing">Billing</a>
					<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
				</div>
			</div>


			<div id="cust" class="container">
				<div class="row row-content">
					<div class="col12 col-sm-9 col-md-10" id="nav-tab" role="tablist">
						<ul class="nav nav-tabs">
							<li class="nav-item"><a id="addcustlink"
								class="nav-link active" href="#addcust" role="tab"
								data-toggle="tab" aria-controls="addcust" aria-selected="true">Add
									customer</a></li>
							<li class="nav-item"><a id="searchcustlink"
								data-toggle="tab" class="nav-link" href="#searchcust" role="tab"
								aria-controls="searchcust" aria-selected="false">Search
									customer</a></li>
							<li class="nav-item"><a id="changeplanlink"
								data-toggle="tab" role="tab" aria-controls="changeplan"
								aria-selected="false" class="nav-link" href="#changeplan">Change
									Plan</a></li>
						</ul>
					</div>
				</div>
				<br />
				<div class="tab-content">
					<div class="tab-pane fade show active" id="addcust" role="tabpanel"
						aria-labelledby="addcust-tab">
						<div class="row row-content">
							<div class="col12 col-sm-4 col-md-4">
								<form id="custform" method="POST"
									action="/telecom/apis/addcustomer">
									<div class="form-group">
										<select name="salutation" class="form-control" id="salutation">
											<option value="Mr.">Mr.</option>
											<option value="Ms.">Ms.</option>
											<option value="Mrs.">Mrs.</option>
										</select>
									</div>
									<div class="form-group">
										<input type="text" name="firstname" class="form-control"
											placeholder="Enter first name" id="firstname">
									</div>
									<div class="form-group">
										<input type="text" name="middlename" class="form-control"
											placeholder="Enter middle name" id="middlename">
									</div>
									<div class="form-group">
										<input type="text" name="lastname" class="form-control"
											placeholder="Enter last name" id="lastname">
									</div>
									<div class="form-group">
										<input type="text" name="mobile" class="form-control"
											placeholder="Enter mobile number" id="mobile">
									</div>
									<div class="form-group">
										<input type="text" name="address" class="form-control"
											placeholder="Enter address" id="address">
									</div>
									<div class="form-group">
										<input type="text" name="email" class="form-control"
											placeholder="Enter e-mail address" id="email">
									</div>
									<div class="form-group">
										<select id="custplan" name="plan"></select>
									</div>
									<button type="submit" name="submit" class="btn btn-primary">Submit</button>
									<br /> <br />
									<div class="alert alert-warning" id="server-results1">
										<!-- For server results -->
									</div>
								</form>
							</div>
						</div>
					</div>
					<div class="tab-pane fade" id="searchcust" role="tabpanel"
						aria-labelledby="searchcust-tab">
						<div class="col12 col-sm-4 col-md-4">
							<form id="searchcustform" method="POST"
								action="/telecom/apis/searchcustomer">
								<div class="form-group">
									<input type="text" name="mobile" class="form-control"
										placeholder="Enter mobile number" id="mob">
								</div>
								<button type="submit" name="searchcust" class="btn btn-primary">Search</button>
								<br /> <br /> <br />
							</form>
							<form id="listcustform" method="POST"
								action="/telecom/apis/listcustomers">
								<button type="submit" name="listcust" class="btn btn-primary">List
									customers</button>
								<br /> <br /> <br />
							</form>
						</div>
						<div class="col12 col-sm-11 col-md-11">
							<div class="alert alert-warning" id="server-results3">
								<!-- For server results -->
							</div>
						</div>
					</div>
					<div class="tab-pane fade" id="changeplan" role="tabpanel"
						aria-labelledby="changeplan-tab">
						<div class="col12 col-sm-4 col-md-4">
							<form id="changeplanform" method="POST"
								action="/telecom/apis/changeplan">
								<div class="form-group">
									<input type="text" name="mobile" class="form-control"
										placeholder="Enter mobile number" id="mob"> <br /> <select
										id="plan" name="plan"></select>
								</div>
								<button type="submit" name="changeplan" class="btn btn-primary">Change
									Plan</button>
								<br /> <br /> <br />
								<div class="alert alert-warning" id="server-results4">
									<!-- For server results -->
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script>
		$
				.get(
						"/telecom/apis/get-plan-names?status=active",
						function(data) {
							let dropdown = $('#plan');
							let dropdowncust = $('#custplan');
							var dataArr = data.split(',');
							dropdown.empty();
							dropdown
									.append('<option selected="true" disabled>Choose a plan</option>');
							dropdown.prop('selectedIndex', 0);
							dropdowncust
									.append('<option selected="true" disabled>Choose a plan</option>');
							dropdowncust.prop('selectedIndex', 0);
							for (var i = 0; i < dataArr.length; i++) {
								dropdown
										.append('<option value="'+dataArr[i]+'">'
												+ dataArr[i] + '</option>');
								dropdowncust
										.append('<option value="'+dataArr[i]+'">'
												+ dataArr[i] + '</option>');
							}
						});

		$("#custform").submit(function(event) {
			$("#server-results1").html("Saving data...");
			event.preventDefault(); //prevent default action 
			var post_url = $(this).attr("action"); //get form action url
			var request_method = $(this).attr("method"); //get form GET/POST method
			var form_data = $(this).serialize(); //Encode form elements for submission
        
			$.ajax({
				url : post_url,
				type : request_method,
				data : form_data
			}).done(function(response) {
				$("#server-results1").html(response);
			});
		});

		$("#listcustform").submit(function(event) {
			$("#server-results1").html(" ");
			$("#server-results3").html("Getting list of customers...");
			event.preventDefault(); //prevent default action 
			var post_url = $(this).attr("action"); //get form action url
			var request_method = $(this).attr("method"); //get form GET/POST method
			var form_data = $(this).serialize(); //Encode form elements for submission

			$.ajax({
				url : post_url,
				type : request_method,
				data : form_data
			}).done(function(response) {
				$("#server-results3").html(response);
			});
		});

		$("#searchcustform").submit(function(event) {
			$("#server-results1").html(" ");
			$("#server-results3").html("Getting data for customer...");
			event.preventDefault(); //prevent default action 
			var post_url = $(this).attr("action"); //get form action url
			var request_method = $(this).attr("method"); //get form GET/POST method
			var form_data = $(this).serialize(); //Encode form elements for submission

			$.ajax({
				url : post_url,
				type : request_method,
				data : form_data
			}).done(function(response) {
				$("#server-results3").html(response);
			});
		});

		$("#changeplanform").submit(function(event) {
			$("#server-results1").html(" ");
			$("#server-results4").html("Processing request...");
			event.preventDefault(); //prevent default action 
			var post_url = $(this).attr("action"); //get form action url
			var request_method = $(this).attr("method"); //get form GET/POST method
			var form_data = $(this).serialize(); //Encode form elements for submission

			$.ajax({
				url : post_url,
				type : request_method,
				data : form_data
			}).done(function(response) {
				$("#server-results4").html(response);
			});
		});
	</script>
</body>
</html>